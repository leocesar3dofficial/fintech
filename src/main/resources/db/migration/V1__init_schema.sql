create table accounts (balance numeric(38,2), created_at date, id bigint generated by default as identity, user_id bigint not null, institution varchar(255), name varchar(255), type varchar(255), primary key (id));
create table budgets (amount numeric(38,2), month date, category_id bigint not null, id bigint generated by default as identity, user_id bigint not null, primary key (id));
create table categories (is_income boolean, id bigint generated by default as identity, user_id bigint not null, name varchar(255), primary key (id));
create table goals (current_amount numeric(38,2), due_date date, target_amount numeric(38,2), id bigint generated by default as identity, user_id bigint not null, name varchar(255), primary key (id));
create table transactions (amount numeric(38,2), date date, is_recurring boolean, account_id bigint not null, category_id bigint not null, id bigint generated by default as identity, description varchar(255), primary key (id));
create table users (id bigint generated by default as identity, email varchar(255), password varchar(255), role varchar(255), username varchar(255), primary key (id), unique (email));
alter table if exists accounts add constraint FKnjuop33mo69pd79ctplkck40n foreign key (user_id) references users;
alter table if exists budgets add constraint FKn7qib00712y8dwelmqfwis6ka foreign key (category_id) references categories;
alter table if exists budgets add constraint FKln0tm5tgf3f9q3sp9sa5m8m7b foreign key (user_id) references users;
alter table if exists categories add constraint FKghuylkwuedgl2qahxjt8g41kb foreign key (user_id) references users;
alter table if exists goals add constraint FKb1mp6ulyqkpcw6bc1a2mr7v1g foreign key (user_id) references users;
alter table if exists transactions add constraint FK20w7wsg13u9srbq3bd7chfxdh foreign key (account_id) references accounts;
alter table if exists transactions add constraint FKsqqi7sneo04kast0o138h19mv foreign key (category_id) references categories;
